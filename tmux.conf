# reload config file (change file location to your the tmux.conf you want to use)
bind-key r source-file ~/.tmux.conf

# prefix
set-option -g prefix C-b
set-option -g prefix2 C-j

# changing bash shell behaviour to be a non-login shell
#set -g default-command "exec bash"

# History limits
set -g history-limit 10000

## Terminal identification
set -g default-terminal "screen-256color"
#set -g default-terminal "screen"

# adding Ms to TERM capabilities
# set -as terminal-features ',xterm-256color:clipboard'
set -as terminal-overrides ',xterm-256color:Ms=\E]52;%p1%s;%p2%s\007'
set -as terminal-overrides ',screen-256color:Ms=\E]52;%p1%s;%p2%s\007'

# switch panes using Shift-arrow without prefix
bind-key -n S-Left select-pane -L
bind-key -n S-Right select-pane -R
bind-key -n S-Up select-pane -U
bind-key -n S-Down select-pane -D
bind-key -n M-Right next-window
bind-key -n M-Left previous-window

#resizing panes with alt/shift arrows
bind-key -n S-M-Left resize-pane -L
bind-key -n S-M-Right resize-pane -R
bind-key -n S-M-Up resize-pane -U
bind-key -n S-M-Down resize-pane -D

# Swap windows across themselves
bind-key -r '<' swap-window -t -1 -d
bind-key -r '>' swap-window -t +1 -d

### Enable mouse mode (tmux 2.1 and above)
#set -g mouse on
bind m set mouse\; display-message "Mouse is now #{?mouse,on,off}"
bind-key -n DoubleClick1Pane select-pane \; copy-mode \; send-keys -X clear-selection \; send-keys -X select-word \; send-keys -X copy-selection-no-clear \; copy-mode -q
#bind-key    -T copy-mode    MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "xclip"
# similarly, I believe only needed for keyboard based copies:
#bind-key    -T copy-mode    C-w   send-keys -X copy-pipe-and-cancel "xclip"
#bind-key    -T copy-mode    M-w   send-keys -X copy-pipe-and-cancel "xclip"

# Enter copy mode with Alt-pgup
bind-key -n M-PgUp copy-mode

# set window and pane index to 1 (0 by default)
set -g base-index 1
setw -g pane-base-index 1

## visual and sound notification
set -g visual-activity off
set -g visual-bell off
set -g visual-silence off
setw -g monitor-activity off
set -g bell-action none

## Switch off automatic window renaming
setw -g automatic-rename off

######################
### DESIGN CHANGES ###
######################


#window mode (selection)
setw -g mode-style bg=colour6,fg=colour0

#set inactive/active window styles
#set -g window-style 'fg=colour247,bg=colour236'
#set -g window-active-style 'fg=colour250,bg=black'

# set the pane border colors
#set -g pane-border-style 'fg=colour235,bg=colour238'
#set -g pane-active-border-style 'fg=colour51,bg=colour236'

# window status
setw -g window-status-format ' #I#[fg=colour237]:#[fg=colour250]#W#[fg=colour244]#F '
setw -g window-status-style fg=colour138,bg=colour235,none
setw -g window-status-current-format ' #I#[fg=colour250]:#[fg=colour255]#W#[fg=colour50]#F '
setw -g window-status-current-style fg=colour81,bg=colour238,bold

# bell style?
setw -g window-status-bell-style fg=colour255,bg=colour1,bold

# The panes
set -g pane-border-style bg=colour235,fg=colour238
set -g pane-active-border-style bg=colour236,fg=colour51

# The messages
set -g message-style fg=colour232,bg=colour166,bold

# Info on left (I don't have a session display for now)
set -g status-left ''

# The statusbar
set -g status-position bottom
set -g status-style bg=colour234,fg=colour137,dim
set -g status-interval 5
set -g status-right-length 53
set -g status-left-length 20
set -g status-left ''
set -g status-right '#[fg=colour233,bg=colour241] \
	#(freemem.sh) \
	#[fg=colour233,bg=colour245] \
	#(read one five fifteen other < /proc/loadavg ; echo $one\|$five\|$fifteen) \
	#[fg=colour233,bg=colour241,bold] \
	#(TZ="Europe/Copenhagen" date +%%d/%%m) \
	#[fg=colour233,bg=colour245,bold] \
	#(TZ="Europe/Copenhagen" date +%%H:%%M:%%S) '
#(tmux-mem-cpu-load --mem-mode 2 --graph-lines 5 --interval 2)\
#(free | grep Mem | awk '{ printf("%.1f\n", $3/$2 * 100.0) }') \

# save sessions
run-shell ~/.config/tmux/tmux-resurrect/resurrect.tmux
run-shell ~/.config/tmux/tmux-continuum/continuum.tmux
